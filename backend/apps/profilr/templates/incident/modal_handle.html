{% load webpack_static from profilr_tags %}
{% load to_date from profilr_tags %}
{% load json_encode from profilr_tags %}

<turbo-frame id="incident_modal_handle_{{ incident.id }}">
<div class="container__form" 
    data-controller="incidentHandleForm"
    data-incidentHandleForm-parent-context-value =  "{{ parent_context|json_encode }}"
    data-incidentHandleForm-form-is-submitted-value =  {% if form_submitted %}true{% else %}false{% endif %}
>
    {% if form %}
    <form action="{% if handled_type %}{% url 'incident_modal_handle_part' incident.id %}{% else %}{% url 'incident_modal_handled_type_part' incident.id handled_type %}{% endif %}" method="post" data-testid="handleIncidentForm" novalidate>
        {% csrf_token %}

        {{ form.handle_choice.label_tag }}
        {{ form.handle_choice }}

        <fieldset>
            {{ form.external_text.label_tag }}
            {{ form.external_text }}
        </fieldset>
        <fieldset>
            {{ form.internal_text.label_tag }}
            {{ form.internal_text }}
        </fieldset>


        
        <div class="form-row container__button">
            <button type="reset" class="btn btn-tertiary modal-exit"><span>Annuleren</span></button>
            <button type="submit" class="btn btn-action"><span>Afhandelen</span></button>
        </div>
    </form>
    {% else %}

    {% endif %}
</div>
</turbo-frame>
