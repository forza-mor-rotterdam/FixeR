{% extends 'base.html' %}
{% load to_date from profilr_tags %}
{% block title %}{{ incident.locatie.adres.straatNaam }} {{ incident.locatie.adres.huisnummer }} mutatieregels{% endblock %}

{% comment %} {% block initial_src_url %}{% url 'mutation_lines_part' id %}{% endblock %} {% endcomment %}
{% block body %}
<turbo-frame id="base_frame" data-turbo-action="advance">
    <div>
        <a href="{% url 'incident_detail' id %}" data-turbo-action="advance" class="link--back">
            <svg width="9" height="14" viewBox="0 0 9 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.99275 6.99995L0.689453 1.69665L1.75011 0.635986L8.11407 6.99995L1.75011 13.3639L0.689453 12.3032L5.99275 6.99995Z" fill="#00811F"/>
            </svg>
            Terug
        </a>
    </div>
    <div>
        <h1 class="h4">Mutatieregels</h1>
    </div>
    <div>
        
        <span>Melding {{ id }}</span>
        <ul class="list__mutations">
            {% for mutation in mutationLines %}
                <li data-controller="datetime" data-datetime-date-object-value="{{ mutation.datum }}">
                    <details>
                        <summary>
                            <strong>{{ mutation.datum|to_date|date:"d-m-Y" }} <span data-datetime-target="timeHoursMinutes"></span> - {{ mutation.gebruiker }}</strong>
                            <p>{{ mutation.opmerking }}</p>
                        </summary>
                        {% if mutation.details|length > 0 %}
                            <dl>
                                <dt>Datum</dt>
                                <dd>{{ mutation.datum|to_date|date:"d-m-Y" }} <span data-datetime-target="timeHoursMinutes2"></span></dd>
                                {% for detail in mutation.details %}
                                    {% if detail.key and detail.value %}
                                        <dt>{{ detail.key }}</dt>
                                        <dd>{{ detail.value }}</dd>
                                    {% endif %}
                                {% endfor %}
                            </dl>
                            
                        {% endif %}
                    </details>
                </li>
            {% endfor %}
        </ul>
        
    </div>
</turbo-frame>
{% endblock %}
